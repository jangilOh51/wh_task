# 테스트 아키텍처 설명 문서

## 1. 테스트 케이스
상세 테스트 케이스 목록은 `output/과제_테스트케이스.xlsx` 문서를 참고해 주시기 바랍니다.

---

## 2. 테스트 아키텍처

본 테스트 프레임워크는 **계층화된 설계(Layered Architecture)**를 채택하여 각 부분의 역할을 명확히 분리하고, 유지보수성과 확장성을 높이는 데 중점을 두었습니다.

### 2.1. 아키텍처 시각화 (Mermaid)

```mermaid
graph TD
    A[테스트 케이스 (pytest)] --> B{서비스 레이어 (OrderService)};
    B --> C(API 클라이언트);
    C --> D{데이터 모델 (DTO)};
    C --> E[Mock 서버 응답];
    F[테스트 데이터 (settings.py)] --> D;
    F --> A;

    subgraph "Test Layer"
        A
    end

    subgraph "Business Logic Layer"
        B
    end

    subgraph "API Abstraction Layer"
        C
        D
    end

    subgraph "Test Infrastructure"
        E
        F
    end
```

### 2.2. 주요 구성 요소 설명

1.  **`api_test/tests/scenario`**:
    -   `pytest` 프레임워크를 사용하여 테스트 시나리오를 정의하는 최상위 계층입니다.
    -   `@allure` 데코레이터를 사용하여 테스트의 목적과 종류를 명확히 하고, 상세한 리포트를 생성합니다.
    -   실제 테스트 로직보다는 **서비스 레이어**를 호출하여 시나리오를 실행하는 데 집중합니다.
    -   **왜 이렇게 설계했는가?**: 테스트의 가독성을 높이고, 비즈니스 로직의 변경이 테스트 코드에 미치는 영향을 최소화하기 위함입니다. 시나리오의 흐름을 쉽게 파악할 수 있습니다.

2.  **`api_test/service`**:
    -   `OrderService`와 같이, 여러 API 호출을 조합하여 하나의 완성된 비즈니스 시나리오(예: 메뉴 선택 후 주문)를 구성합니다.
    -   테스트 케이스와 API 클라이언트 사이의 중간 다리 역할을 수행합니다.
    -   **왜 이렇게 설계했는가?**: 복잡한 사용자 시나리오를 테스트할 때, 테스트 케이스가 지나치게 비대해지는 것을 방지합니다. 시나리오 자체의 로직을 재사용할 수 있어 효율적입니다.

3.  **`api_test/api`**:
    -   `MenuSelectApi`, `OrderCreateApi`처럼 각 API 엔드포인트와의 통신을 책임지는 클래스를 정의합니다.
    -   HTTP 요청/응답 처리, 헤더 설정 등 저수준(low-level)의 API 통신 로직을 캡슐화합니다.
    -   **왜 이렇게 설계했는가?**: UI 테스트의 '페이지 객체 모델(Page Object Model)'과 유사한 패턴입니다. API 명세가 변경되더라도 이 계층의 코드만 수정하면 되므로 유지보수가 용이합니다.

4.  **`api_test/core`**:
    -   `api_client`를 모듈화하여 API 통신의 핵심 로직을 관리합니다.
    -   **왜 이렇게 설계했는가?**: 모든 API 클라이언트가 공통으로 사용하는 요청 및 응답 처리 로직을 중앙에서 관리하여 중복을 제거하고 일관성을 유지합니다.

5.  **`api_test/model`**:
    -   API 요청 및 응답 데이터의 구조를 정의하는 데이터 전송 객체(DTO)와 Mock 응답 객체를 포함합니다.
    -   **왜 이렇게 설계했는가?**: 매직 스트링이나 딕셔너리를 직접 사용하는 대신, 명확한 타입과 필드를 가진 객체를 사용함으로써 코드의 안정성과 가독성을 높입니다.

6.  **`api_test/common`**:
    -   여러 테스트에서 공통으로 사용될 수 있는 유틸리티 함수들을 정의합니다. (예: 데이터 변환, 특정 포맷 생성 등)
    -   **왜 이렇게 설계했는가?**: 코드 재사용성을 높이고, 공통 기능의 수정을 용이하게 합니다.

7.  **`api_test/config`**:
    -   테스트 환경의 기본 URL(`base_url`) 등과 같은 설정 정보를 관리합니다.
    -   **왜 이렇게 설계했는가?**: 테스트 환경(개발, 스테이징, 운영)이 변경되더라도 설정 파일만 수정하여 쉽게 대응할 수 있습니다.

8.  **`api_test/codes`**:
    -   `MenuId`, `ShopId` 등 테스트에 사용되는 고정 데이터나 API 응답 코드와 같은 상수 값을 관리합니다.
    -   **왜 이렇게 설계했는가?**: 테스트 데이터가 코드 전반에 흩어져 있는 것을 방지하고, 중앙에서 일관되게 관리하여 변경을 용이하게 합니다.
